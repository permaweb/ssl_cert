<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="ssl_cert v1.0.0">


    <title>acme_protocol â€” ssl_cert v1.0.0</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-67DEDFE0.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
ssl_cert
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssl_cert</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">acme_protocol</span> 
    <small class="app-vsn" translate="no">(ssl_cert v1.0.0)</small>

  </h1>


    <section id="moduledoc">
<p>ACME protocol implementation module.</p><p>This module implements the core ACME (Automatic Certificate Management
Environment) v2 protocol operations for automated certificate issuance
and management. It handles account creation, certificate orders, challenge
processing, order finalization, and certificate download according to RFC 8555.</p><p>The module provides high-level protocol operations that orchestrate the
lower-level HTTP, cryptographic, and CSR generation operations.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_account/0" data-no-tooltip translate="no">acme_account()</a>

      </div>

        <div class="summary-synopsis"><p>ACME account record containing private key, URL, and key ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_environment/0" data-no-tooltip translate="no">acme_environment()</a>

      </div>

        <div class="summary-synopsis"><p>ACME environment type - staging or production.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_order/0" data-no-tooltip translate="no">acme_order()</a>

      </div>

        <div class="summary-synopsis"><p>ACME order record containing order details and status.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:dns_challenge/0" data-no-tooltip translate="no">dns_challenge()</a>

      </div>

        <div class="summary-synopsis"><p>DNS challenge record for domain validation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:domain_list/0" data-no-tooltip translate="no">domain_list()</a>

      </div>

        <div class="summary-synopsis"><p>List of domain names as strings.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:email_address/0" data-no-tooltip translate="no">email_address()</a>

      </div>

        <div class="summary-synopsis"><p>Email address as a string.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:request_state/0" data-no-tooltip translate="no">request_state()</a>

      </div>

        <div class="summary-synopsis"><p>Request state map with binary keys and arbitrary values.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:validation_result/0" data-no-tooltip translate="no">validation_result()</a>

      </div>

        <div class="summary-synopsis"><p>Validation result map with binary keys and values.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create_account/2" data-no-tooltip translate="no">create_account(Config, Wallet)</a>

      </div>

        <div class="summary-synopsis"><p>Creates a new ACME account with Let's Encrypt.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#download_certificate/2" data-no-tooltip translate="no">download_certificate/2</a>

      </div>

        <div class="summary-synopsis"><p>Downloads the certificate from the ACME server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_location_as_string/1" data-no-tooltip translate="no">extract_location_as_string(Headers)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts location header and converts to string format.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#finalize_order/3" data-no-tooltip translate="no">finalize_order(Account, Order, RSAPrivKey)</a>

      </div>

        <div class="summary-synopsis"><p>Finalizes a certificate order after all challenges are validated.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#find_dns_challenge/1" data-no-tooltip translate="no">find_dns_challenge(Challenges)</a>

      </div>

        <div class="summary-synopsis"><p>Finds the DNS-01 challenge in a list of challenges.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_authorization/1" data-no-tooltip translate="no">get_authorization(AuthzUrl)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieves authorization details from the ACME server.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_challenge_status/2" data-no-tooltip translate="no">get_challenge_status(Account, Challenge)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieves current challenge status using POST-as-GET (does not trigger).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_dns_challenge/2" data-no-tooltip translate="no">get_dns_challenge(Account, Order)</a>

      </div>

        <div class="summary-synopsis"><p>Retrieves DNS-01 challenges for all domains in an order.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_order/2" data-no-tooltip translate="no">get_order(Account, OrderUrl)</a>

      </div>

        <div class="summary-synopsis"><p>Fetches the latest state of an order (POST-as-GET).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#request_certificate/2" data-no-tooltip translate="no">request_certificate(Account, Domains)</a>

      </div>

        <div class="summary-synopsis"><p>Requests a certificate for the specified domains.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_challenge/2" data-no-tooltip translate="no">validate_challenge(Account, Challenge)</a>

      </div>

        <div class="summary-synopsis"><p>Validates a DNS challenge with the ACME server.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:acme_account/0">

  <div class="detail-header">
    <a href="#t:acme_account/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_account()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L80" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_account() :: #acme_account{key :: <a href="https://www.erlang.org/doc/apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>(), url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(), kid :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>ACME account record containing private key, URL, and key ID.</p>
  </section>
</section>
<section class="detail" id="t:acme_environment/0">

  <div class="detail-header">
    <a href="#t:acme_environment/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_environment()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L86" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_environment() :: staging | production.</pre>

      </div>

<p>ACME environment type - staging or production.</p>
  </section>
</section>
<section class="detail" id="t:acme_order/0">

  <div class="detail-header">
    <a href="#t:acme_order/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_order()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L82" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_order() ::
          #acme_order{url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      status :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      expires :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      identifiers :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:list/0">list</a>(),
                      authorizations :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:list/0">list</a>(),
                      finalize :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      certificate :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>ACME order record containing order details and status.</p>
  </section>
</section>
<section class="detail" id="t:dns_challenge/0">

  <div class="detail-header">
    <a href="#t:dns_challenge/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">dns_challenge()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L84" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> dns_challenge() ::
          #dns_challenge{domain :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         token :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         key_authorization :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         dns_value :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>DNS challenge record for domain validation.</p>
  </section>
</section>
<section class="detail" id="t:domain_list/0">

  <div class="detail-header">
    <a href="#t:domain_list/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">domain_list()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L88" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> domain_list() :: [<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()].</pre>

      </div>

<p>List of domain names as strings.</p>
  </section>
</section>
<section class="detail" id="t:email_address/0">

  <div class="detail-header">
    <a href="#t:email_address/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">email_address()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L90" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> email_address() :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>

<p>Email address as a string.</p>
  </section>
</section>
<section class="detail" id="t:request_state/0">

  <div class="detail-header">
    <a href="#t:request_state/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">request_state()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L94" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> request_state() :: #{<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>() => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Request state map with binary keys and arbitrary values.</p>
  </section>
</section>
<section class="detail" id="t:validation_result/0">

  <div class="detail-header">
    <a href="#t:validation_result/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">validation_result()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L92" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> validation_result() :: #{<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>() => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>()}.</pre>

      </div>

<p>Validation result map with binary keys and values.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="create_account/2">

  <div class="detail-header">
    <a href="#create_account/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">create_account(Config, Wallet)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L66" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> create_account(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()) -> {ok, <a href="#t:acme_account/0">acme_account</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Creates a new ACME account with Let's Encrypt.</p><p>This function performs the complete account creation process:</p><ol><li>Determines the ACME directory URL based on environment</li><li>Generates a proper RSA key pair for the ACME account</li><li>Retrieves the ACME directory to get service endpoints</li><li>Creates a new account by agreeing to terms of service</li><li>Returns an account record with key, URL, and key identifier</li></ol><p>Required configuration in Config map:</p><ul><li>environment: 'staging' or 'production'</li><li>email: Contact email for the account</li></ul><p>Note: The account uses a generated RSA key, while CSR generation uses
the wallet key. This ensures proper key serialization for account management.</p><p>@param Config A map containing account creation parameters
@returns {ok, Account} on success with account details, or
{error, Reason} on failure with error information</p>
  </section>
</section>
<section class="detail" id="download_certificate/2">

  <div class="detail-header">
    <a href="#download_certificate/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">download_certificate/2</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L429" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> download_certificate(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:acme_order/0">acme_order</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Downloads the certificate from the ACME server.</p><p>This function retrieves the issued certificate when the order status is 'valid'.
The returned PEM typically contains the end-entity certificate followed
by intermediate certificates.</p><p>@param _Account The ACME account record (used for authentication)
@param Order The finalized certificate order
@returns {ok, CertificatePEM} on success with certificate chain, or {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="extract_location_as_string/1">

  <div class="detail-header">
    <a href="#extract_location_as_string/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">extract_location_as_string(Headers)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L524" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract_location_as_string(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>() | undefined.</pre>

      </div>

<p>Extracts location header and converts to string format.</p><p>@param Headers HTTP response headers
@returns Location as string or undefined</p>
  </section>
</section>
<section class="detail" id="finalize_order/3">

  <div class="detail-header">
    <a href="#finalize_order/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">finalize_order(Account, Order, RSAPrivKey)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L364" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> finalize_order(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:acme_order/0">acme_order</a>(), <a href="https://www.erlang.org/doc/apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>()) ->
                        {ok, <a href="#t:acme_order/0">acme_order</a>(), <a href="https://www.erlang.org/doc/apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Finalizes a certificate order after all challenges are validated.</p><p>This function completes the certificate issuance process:</p><ol><li>Generates a Certificate Signing Request (CSR) for the domains</li><li>Uses the RSA key pair from wallet for the certificate</li><li>Submits the CSR to the ACME server's finalize endpoint</li><li>Returns the updated order and the certificate private key for nginx</li></ol><p>@param Account The ACME account record
@param Order The certificate order with validated challenges
@param Opts Configuration options for CSR generation
@returns {ok, UpdatedOrder, CertificateKey} on success, or {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="find_dns_challenge/1">

  <div class="detail-header">
    <a href="#find_dns_challenge/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">find_dns_challenge(Challenges)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L502" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> find_dns_challenge([<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()]) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Finds the DNS-01 challenge in a list of challenges.</p><p>@param Challenges A list of challenge maps
@returns {ok, Challenge} if found, {error, not_found} otherwise</p>
  </section>
</section>
<section class="detail" id="get_authorization/1">

  <div class="detail-header">
    <a href="#get_authorization/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">get_authorization(AuthzUrl)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L488" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_authorization(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Retrieves authorization details from the ACME server.</p><p>@param AuthzUrl The authorization URL
@returns {ok, Authorization} on success, {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="get_challenge_status/2">

  <div class="detail-header">
    <a href="#get_challenge_status/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">get_challenge_status(Account, Challenge)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L319" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_challenge_status(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:dns_challenge/0">dns_challenge</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Retrieves current challenge status using POST-as-GET (does not trigger).</p><p>@param Account The ACME account
@param Challenge The challenge record
@returns {ok, Status} on success, {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="get_dns_challenge/2">

  <div class="detail-header">
    <a href="#get_dns_challenge/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">get_dns_challenge(Account, Order)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L203" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_dns_challenge(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:acme_order/0">acme_order</a>()) -> {ok, [<a href="#t:dns_challenge/0">dns_challenge</a>()]} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Retrieves DNS-01 challenges for all domains in an order.</p><p>This function processes each authorization in the order:</p><ol><li>Fetches authorization details from each authorization URL</li><li>Locates the DNS-01 challenge within each authorization</li><li>Generates the key authorization string for each challenge</li><li>Computes the DNS TXT record value using SHA-256 hash</li><li>Returns a list of DNS challenge records with all required information</li></ol><p>@param Account The ACME account record
@param Order The certificate order from request_certificate/2
@returns {ok, [DNSChallenge]} on success with challenge list, or {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="get_order/2">

  <div class="detail-header">
    <a href="#get_order/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">get_order(Account, OrderUrl)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L461" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> get_order(<a href="#t:acme_account/0">acme_account</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Fetches the latest state of an order (POST-as-GET).</p><p>@param Account The ACME account
@param OrderUrl The order URL
@returns {ok, OrderMap} with at least status and optional certificate, or {error, Reason}</p>
  </section>
</section>
<section class="detail" id="request_certificate/2">

  <div class="detail-header">
    <a href="#request_certificate/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">request_certificate(Account, Domains)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L143" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> request_certificate(<a href="#t:acme_account/0">acme_account</a>(), [<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()]) -> {ok, <a href="#t:acme_order/0">acme_order</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Requests a certificate for the specified domains.</p><p>This function initiates the certificate issuance process:</p><ol><li>Determines the ACME directory URL from the account</li><li>Creates domain identifiers for the certificate request</li><li>Submits a new order request to the ACME server</li><li>Returns an order record with authorization URLs and status</li></ol><p>@param Account The ACME account record from create_account/1
@param Domains A list of domain names for the certificate
@returns {ok, Order} on success with order details, or {error, Reason} on failure</p>
  </section>
</section>
<section class="detail" id="validate_challenge/2">

  <div class="detail-header">
    <a href="#validate_challenge/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">validate_challenge(Account, Challenge)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/acme_protocol.erl#L277" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> validate_challenge(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:dns_challenge/0">dns_challenge</a>()) -> {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Validates a DNS challenge with the ACME server.</p><p>This function notifies the ACME server that the DNS TXT record has been
created and requests validation. After calling this function, the challenge
status should be polled until it becomes 'valid' or 'invalid'.</p><p>@param Account The ACME account record
@param Challenge The DNS challenge record from get_dns_challenge/2
@returns {ok, Status} on success with challenge status, or {error, Reason} on failure</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/ssl_cert/1.0.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/ssl_cert/1.0.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssl_cert.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
