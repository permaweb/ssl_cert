<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.35.1">
    <meta name="project" content="ssl_cert v1.0.0">


    <title>ssl_cert_challenge â€” ssl_cert v1.0.0</title>
    <link rel="stylesheet" href="dist/html-erlang-4IXSOGMD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-67DEDFE0.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-PVRIOB7F.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="readme.html" class="sidebar-projectName" translate="no">
ssl_cert
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssl_cert</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">ssl_cert_challenge</span> 
    <small class="app-vsn" translate="no">(ssl_cert v1.0.0)</small>

  </h1>


    <section id="moduledoc">
<p>SSL Certificate challenge management module.</p><p>This module handles DNS challenge validation, polling, and status management
for SSL certificate requests. It provides functions to validate challenges
with Let's Encrypt, poll for completion, and handle timeouts and retries.</p><p>The module implements the complete challenge validation workflow including
initial validation triggering, status polling, and result formatting.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_account/0" data-no-tooltip translate="no">acme_account()</a>

      </div>

        <div class="summary-synopsis"><p>ACME account record containing private key, URL, and key ID.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_environment/0" data-no-tooltip translate="no">acme_environment()</a>

      </div>

        <div class="summary-synopsis"><p>ACME environment type - staging or production.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:acme_order/0" data-no-tooltip translate="no">acme_order()</a>

      </div>

        <div class="summary-synopsis"><p>ACME order record containing order details and status.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:dns_challenge/0" data-no-tooltip translate="no">dns_challenge()</a>

      </div>

        <div class="summary-synopsis"><p>DNS challenge record for domain validation.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:domain_list/0" data-no-tooltip translate="no">domain_list()</a>

      </div>

        <div class="summary-synopsis"><p>List of domain names as strings.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:email_address/0" data-no-tooltip translate="no">email_address()</a>

      </div>

        <div class="summary-synopsis"><p>Email address as a string.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:request_state/0" data-no-tooltip translate="no">request_state()</a>

      </div>

        <div class="summary-synopsis"><p>Request state map with binary keys and arbitrary values.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:validation_result/0" data-no-tooltip translate="no">validation_result()</a>

      </div>

        <div class="summary-synopsis"><p>Validation result map with binary keys and values.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#all_challenges_valid/1" data-no-tooltip translate="no">all_challenges_valid(Results)</a>

      </div>

        <div class="summary-synopsis"><p>Checks if all validation results have valid status.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_challenge_info/1" data-no-tooltip translate="no">extract_challenge_info(Challenge)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts challenge information from various challenge formats.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_domain_bin/1" data-no-tooltip translate="no">extract_domain_bin(Challenge)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts domain as binary from challenge record or map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format_challenges_for_response/1" data-no-tooltip translate="no">format_challenges_for_response(Challenges)</a>

      </div>

        <div class="summary-synopsis"><p>Formats challenges for user-friendly HTTP response.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#merge_validation_results/2" data-no-tooltip translate="no">merge_validation_results(OriginalResults, RetryResults)</a>

      </div>

        <div class="summary-synopsis"><p>Merges validation results by domain, with retry results taking precedence.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#poll_challenge_status/6" data-no-tooltip translate="no">poll_challenge_status(Account, ChallengeRecord, Domain, StartTime, TimeoutSeconds, AttemptNum)</a>

      </div>

        <div class="summary-synopsis"><p>Polls a challenge status until it reaches a final state or times out.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#poll_order_until_valid/3" data-no-tooltip translate="no">poll_order_until_valid(Account, State, TimeoutSeconds)</a>

      </div>

        <div class="summary-synopsis"><p>Poll order status until valid or timeout.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#results_to_domain_map/1" data-no-tooltip translate="no">results_to_domain_map(Results)</a>

      </div>

        <div class="summary-synopsis"><p>Converts validation results list to a domain-keyed map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_challenges_with_timeout/3" data-no-tooltip translate="no">validate_challenges_with_timeout(Account, Challenges, TimeoutSeconds)</a>

      </div>

        <div class="summary-synopsis"><p>Validates DNS challenges with Let's Encrypt with polling and timeout.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_dns_challenges_state/2" data-no-tooltip translate="no">validate_dns_challenges_state(State, RSAPrivKey)</a>

      </div>

        <div class="summary-synopsis"><p>Validates DNS challenges and manages the complete validation workflow.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:acme_account/0">

  <div class="detail-header">
    <a href="#t:acme_account/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_account()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L80" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_account() :: #acme_account{key :: <a href="https://www.erlang.org/doc/apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>(), url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(), kid :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>ACME account record containing private key, URL, and key ID.</p>
  </section>
</section>
<section class="detail" id="t:acme_environment/0">

  <div class="detail-header">
    <a href="#t:acme_environment/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_environment()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L86" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_environment() :: staging | production.</pre>

      </div>

<p>ACME environment type - staging or production.</p>
  </section>
</section>
<section class="detail" id="t:acme_order/0">

  <div class="detail-header">
    <a href="#t:acme_order/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">acme_order()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L82" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> acme_order() ::
          #acme_order{url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      status :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      expires :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      identifiers :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:list/0">list</a>(),
                      authorizations :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:list/0">list</a>(),
                      finalize :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                      certificate :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>ACME order record containing order details and status.</p>
  </section>
</section>
<section class="detail" id="t:dns_challenge/0">

  <div class="detail-header">
    <a href="#t:dns_challenge/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">dns_challenge()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L84" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> dns_challenge() ::
          #dns_challenge{domain :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         token :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         key_authorization :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         dns_value :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(),
                         url :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()}.</pre>

      </div>

<p>DNS challenge record for domain validation.</p>
  </section>
</section>
<section class="detail" id="t:domain_list/0">

  <div class="detail-header">
    <a href="#t:domain_list/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">domain_list()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L88" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> domain_list() :: [<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>()].</pre>

      </div>

<p>List of domain names as strings.</p>
  </section>
</section>
<section class="detail" id="t:email_address/0">

  <div class="detail-header">
    <a href="#t:email_address/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">email_address()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L90" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> email_address() :: <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>().</pre>

      </div>

<p>Email address as a string.</p>
  </section>
</section>
<section class="detail" id="t:request_state/0">

  <div class="detail-header">
    <a href="#t:request_state/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">request_state()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L94" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> request_state() :: #{<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>() => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Request state map with binary keys and arbitrary values.</p>
  </section>
</section>
<section class="detail" id="t:validation_result/0">

  <div class="detail-header">
    <a href="#t:validation_result/0" class="detail-link" data-no-tooltip aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">validation_result()</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/include/ssl_cert.hrl#L92" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> validation_result() :: #{<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>() => <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>()}.</pre>

      </div>

<p>Validation result map with binary keys and values.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="all_challenges_valid/1">

  <div class="detail-header">
    <a href="#all_challenges_valid/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">all_challenges_valid(Results)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L544" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> all_challenges_valid([<a href="#t:validation_result/0">validation_result</a>()]) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:boolean/0">boolean</a>().</pre>

      </div>

<p>Checks if all validation results have valid status.</p><p>@param Results List of validation result maps
@returns true if all are valid, false otherwise</p>
  </section>
</section>
<section class="detail" id="extract_challenge_info/1">

  <div class="detail-header">
    <a href="#extract_challenge_info/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">extract_challenge_info(Challenge)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L450" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract_challenge_info(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>() | <a href="#t:dns_challenge/0">dns_challenge</a>()) -> {<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(), <a href="#t:dns_challenge/0">dns_challenge</a>()}.</pre>

      </div>

<p>Extracts challenge information from various challenge formats.</p><p>@param Challenge Challenge in map or record format
@returns {Domain, ChallengeRecord}</p>
  </section>
</section>
<section class="detail" id="extract_domain_bin/1">

  <div class="detail-header">
    <a href="#extract_domain_bin/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">extract_domain_bin(Challenge)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L531" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> extract_domain_bin(<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>() | <a href="#t:dns_challenge/0">dns_challenge</a>()) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:binary/0">binary</a>().</pre>

      </div>

<p>Extracts domain as binary from challenge record or map.</p><p>This function extracts the domain name from a challenge record or map
in various formats and returns it as a binary string.</p><p>@param Challenge Challenge in various formats (map or record)
@returns Domain as binary string</p>
  </section>
</section>
<section class="detail" id="format_challenges_for_response/1">

  <div class="detail-header">
    <a href="#format_challenges_for_response/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">format_challenges_for_response(Challenges)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L251" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format_challenges_for_response([<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()]) -> [<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()].</pre>

      </div>

<p>Formats challenges for user-friendly HTTP response.</p><p>This function converts internal challenge representations to a format
suitable for API responses, including DNS record instructions for
different DNS providers.</p><p>@param Challenges List of DNS challenge maps from stored state
@returns Formatted challenge list for HTTP response</p>
  </section>
</section>
<section class="detail" id="merge_validation_results/2">

  <div class="detail-header">
    <a href="#merge_validation_results/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">merge_validation_results(OriginalResults, RetryResults)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L559" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> merge_validation_results([<a href="#t:validation_result/0">validation_result</a>()], [<a href="#t:validation_result/0">validation_result</a>()]) -> [<a href="#t:validation_result/0">validation_result</a>()].</pre>

      </div>

<p>Merges validation results by domain, with retry results taking precedence.</p><p>@param OriginalResults Original validation results
@param RetryResults Retry validation results
@returns Merged list of validation results</p>
  </section>
</section>
<section class="detail" id="poll_challenge_status/6">

  <div class="detail-header">
    <a href="#poll_challenge_status/6" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">poll_challenge_status(Account, ChallengeRecord, Domain, StartTime, TimeoutSeconds, AttemptNum)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L147" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> poll_challenge_status(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:dns_challenge/0">dns_challenge</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:string/0">string</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>()) ->
                               <a href="#t:validation_result/0">validation_result</a>().</pre>

      </div>

<p>Polls a challenge status until it reaches a final state or times out.</p><p>@param Account ACME account record
@param ChallengeRecord DNS challenge record
@param Domain Domain name for logging
@param StartTime When validation started
@param TimeoutSeconds Total timeout in seconds
@param AttemptNum Current attempt number
@returns Validation result map</p>
  </section>
</section>
<section class="detail" id="poll_order_until_valid/3">

  <div class="detail-header">
    <a href="#poll_order_until_valid/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">poll_order_until_valid(Account, State, TimeoutSeconds)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L237" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> poll_order_until_valid(<a href="#t:acme_account/0">acme_account</a>(), <a href="#t:request_state/0">request_state</a>(), <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>()) ->
                                {valid | processing, <a href="#t:request_state/0">request_state</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Poll order status until valid or timeout.</p><p>@param Account ACME account record
@param State Current request state
@param TimeoutSeconds Timeout in seconds
@returns {Status, UpdatedState} or {error, Reason}</p>
  </section>
</section>
<section class="detail" id="results_to_domain_map/1">

  <div class="detail-header">
    <a href="#results_to_domain_map/1" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">results_to_domain_map(Results)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L571" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> results_to_domain_map([<a href="#t:validation_result/0">validation_result</a>()]) -> <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>().</pre>

      </div>

<p>Converts validation results list to a domain-keyed map.</p><p>@param Results List of validation result maps
@returns Map with domain as key and result as value</p>
  </section>
</section>
<section class="detail" id="validate_challenges_with_timeout/3">

  <div class="detail-header">
    <a href="#validate_challenges_with_timeout/3" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">validate_challenges_with_timeout(Account, Challenges, TimeoutSeconds)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L107" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> validate_challenges_with_timeout(<a href="#t:acme_account/0">acme_account</a>(), [<a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()], <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:integer/0">integer</a>()) -> [<a href="#t:validation_result/0">validation_result</a>()].</pre>

      </div>

<p>Validates DNS challenges with Let's Encrypt with polling and timeout.</p><p>This function triggers validation for each challenge and then polls the status
until each challenge reaches a final state (valid/invalid) or times out.
ACME challenge validation is asynchronous, so we need to poll repeatedly.</p><p>@param Account ACME account record
@param Challenges List of DNS challenges
@param TimeoutSeconds Timeout for validation in seconds
@returns List of validation results</p>
  </section>
</section>
<section class="detail" id="validate_dns_challenges_state/2">

  <div class="detail-header">
    <a href="#validate_dns_challenges_state/2" class="detail-link" data-no-tooltip aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <h1 class="signature" translate="no">validate_dns_challenges_state(State, RSAPrivKey)</h1>

      <a href="https://github.com/permaweb/ssl_cert/blob/v1.0.0/src/ssl_cert_challenge.erl#L69" class="icon-action" rel="help" aria-label="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> validate_dns_challenges_state(<a href="#t:request_state/0">request_state</a>(), <a href="https://www.erlang.org/doc/apps/public_key/public_key.html#t:private_key/0">public_key:private_key</a>()) ->
                                       {ok, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()} | {error, <a href="https://www.erlang.org/doc/apps/erts/erlang.html#t:map/0">map</a>()}.</pre>

      </div>

<p>Validates DNS challenges and manages the complete validation workflow.</p><p>This function orchestrates the challenge validation process including:</p><ol><li>Extracting challenges from state</li><li>Validating each challenge with timeout</li><li>Handling order finalization if all challenges pass</li><li>Managing retries for failed challenges</li><li>Polling order status until completion</li></ol><p>@param State The current request state
@param RSAPrivKey RSA private key
@returns {ok, ValidationResponse} or {error, ErrorResponse}</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/ssl_cert/1.0.0" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/ssl_cert/1.0.0">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssl_cert.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.35.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
